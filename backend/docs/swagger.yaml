basePath: /api/v1
definitions:
  analysis.Analysis:
    properties:
      createdAt:
        type: string
      id:
        type: string
      model:
        type: string
      report:
        $ref: '#/definitions/analysis.Report'
      resumeId:
        type: string
      score:
        type: number
      vacancyId:
        type: string
    type: object
  analysis.Report:
    properties:
      aiRecommendationForCandidate:
        items:
          type: string
        type: array
      aiRecommendationForHR:
        type: string
      candidateSummary:
        type: string
      matchedSkills:
        items:
          type: string
        type: array
      missingSkills:
        items:
          type: string
        type: array
      uniqueStrengths:
        items:
          type: string
        type: array
    type: object
  handlers.candidateItem:
    properties:
      analysisId:
        type: string
      createdAt:
        type: string
      report:
        $ref: '#/definitions/analysis.Report'
      resumeId:
        type: string
      score:
        type: number
    type: object
  handlers.candidatesResponse:
    properties:
      items:
        items:
          $ref: '#/definitions/handlers.candidateItem'
        type: array
      total:
        type: integer
    type: object
  handlers.createAnalysisRequest:
    properties:
      resumeId:
        type: string
      vacancyId:
        type: string
    type: object
  handlers.createVacancyRequest:
    properties:
      description:
        type: string
      skills:
        items:
          $ref: '#/definitions/handlers.skillDTO'
        type: array
      title:
        type: string
    type: object
  handlers.loginRequest:
    properties:
      email:
        type: string
      password:
        type: string
    type: object
  handlers.registerRequest:
    properties:
      email:
        type: string
      password:
        type: string
    type: object
  handlers.skillDTO:
    properties:
      skill:
        type: string
      weight:
        type: number
    type: object
  handlers.updateSkillsRequest:
    properties:
      skills:
        items:
          $ref: '#/definitions/handlers.skillDTO'
        type: array
    type: object
  presenter.ErrorResponse:
    properties:
      message:
        type: string
    type: object
  resume.EducationItem:
    properties:
      degree:
        type: string
      end:
        type: string
      institution:
        type: string
      start:
        type: string
    type: object
  resume.ExperienceItem:
    properties:
      company:
        type: string
      description:
        type: string
      end:
        description: YYYY-MM or "present"
        type: string
      role:
        type: string
      start:
        description: YYYY-MM or free text
        type: string
    type: object
  resume.Profile:
    properties:
      education:
        items:
          $ref: '#/definitions/resume.EducationItem'
        type: array
      experience:
        items:
          $ref: '#/definitions/resume.ExperienceItem'
        type: array
      skills:
        items:
          type: string
        type: array
      summary:
        type: string
    type: object
  resume.ProfileRecord:
    properties:
      error:
        type: string
      model:
        type: string
      profile:
        $ref: '#/definitions/resume.Profile'
      resumeId:
        type: string
      status:
        $ref: '#/definitions/resume.ProfileStatus'
      updatedAt:
        type: string
    type: object
  resume.ProfileStatus:
    enum:
    - pending
    - ok
    - failed
    type: string
    x-enum-varnames:
    - ProfileStatusPending
    - ProfileStatusOK
    - ProfileStatusFailed
  resume.Resume:
    properties:
      createdAt:
        type: string
      filename:
        type: string
      id:
        type: string
      mimeType:
        type: string
      ownerId:
        type: string
      size:
        type: integer
      storageUri:
        type: string
    type: object
  vacancy.SkillWeight:
    properties:
      skill:
        type: string
      weight:
        type: number
    type: object
  vacancy.Vacancy:
    properties:
      createdAt:
        type: string
      description:
        type: string
      id:
        type: string
      ownerId:
        type: string
      skills:
        items:
          $ref: '#/definitions/vacancy.SkillWeight'
        type: array
      title:
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: Сервис автоматизирующий процесс оценки соответствия кандидатов требованиям
    вакансии на основе анализа их резюме с применением NLP-технологий и LLM-модели.
  title: hr-service API
  version: "1.0"
paths:
  /analyses:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/analysis.Analysis'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Список анализов
      tags:
      - Анализ
    post:
      consumes:
      - application/json
      parameters:
      - description: Пара resumeId + vacancyId
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/handlers.createAnalysisRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/analysis.Analysis'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Создать анализ резюме по вакансии
      tags:
      - Анализ
  /analyses/{id}:
    delete:
      parameters:
      - description: ID анализа (UUID)
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Удалить анализ
      tags:
      - Анализ
    get:
      parameters:
      - description: ID анализа (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/analysis.Analysis'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Получить анализ
      tags:
      - Анализ
  /auth/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: login payload
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/handlers.loginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      summary: Login
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      parameters:
      - description: registration payload
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/handlers.registerRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      summary: Register user
      tags:
      - auth
  /health:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Liveness probe
      tags:
      - health
  /ready:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "503":
          description: Service Unavailable
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Readiness probe
      tags:
      - health
  /resume/analyze:
    post:
      consumes:
      - multipart/form-data
      description: Принимает файл резюме в формате PDF или DOCX, извлекает текст и
        запрашивает у LLM рекомендации.
      parameters:
      - description: Файл резюме (PDF или DOCX)
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 'Успех: рекомендации и служебная информация'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Ошибка валидации или чтения файла
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "500":
          description: Внутренняя ошибка сервиса
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Анализ резюме и рекомендации по улучшению
      tags:
      - Резюме
  /resumes:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/resume.Resume'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Список резюме
      tags:
      - Резюме
    post:
      consumes:
      - multipart/form-data
      description: Принимает PDF/DOCX, сохраняет файл и извлекает текст для дальнейшего
        анализа.
      parameters:
      - description: Файл резюме (PDF/DOCX)
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Загрузить резюме
      tags:
      - Резюме
  /resumes/{id}:
    delete:
      parameters:
      - description: ID резюме (UUID)
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Удалить резюме
      tags:
      - Резюме
    get:
      parameters:
      - description: ID резюме (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Получить резюме
      tags:
      - Резюме
  /resumes/{id}/file:
    get:
      parameters:
      - description: ID резюме (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
          schema:
            type: file
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Скачать файл резюме
      tags:
      - Резюме
  /resumes/{id}/profile:
    get:
      parameters:
      - description: ID резюме (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/resume.ProfileRecord'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Получить профиль резюме (структура)
      tags:
      - Резюме
  /resumes/{id}/profile/rebuild:
    post:
      parameters:
      - description: ID резюме (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/resume.ProfileRecord'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Переизвлечь профиль резюме
      tags:
      - Резюме
  /vacancies:
    get:
      produces:
      - application/json
      responses: {}
      security:
      - BearerAuth: []
      summary: Список вакансий
      tags:
      - Вакансии
    post:
      consumes:
      - application/json
      description: Создаёт вакансию с эталонными навыками и их весами.
      parameters:
      - description: Данные вакансии
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/handlers.createVacancyRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Создать вакансию
      tags:
      - Вакансии
  /vacancies/{id}:
    delete:
      parameters:
      - description: ID вакансии (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Удалить вакансию
      tags:
      - Вакансии
    get:
      parameters:
      - description: ID вакансии (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/vacancy.Vacancy'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Получить вакансию по ID
      tags:
      - Вакансии
  /vacancies/{id}/analyses:
    get:
      parameters:
      - description: ID вакансии (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/analysis.Analysis'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Список анализов по вакансии
      tags:
      - Анализ
  /vacancies/{id}/candidates:
    get:
      description: Возвращает список анализов по вакансии с фильтрацией по score и
        навыку, сортировкой и пагинацией.
      parameters:
      - description: ID вакансии (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Минимальный score (0..1)
        in: query
        name: minScore
        type: number
      - description: Навык (фильтр по resume profile skills; если профиля нет — fallback
          на report.matchedSkills)
        in: query
        name: skill
        type: string
      - default: score_desc
        description: 'Сортировка: score_desc|score_asc|created_desc|created_asc'
        in: query
        name: sort
        type: string
      - default: 50
        description: Лимит
        in: query
        name: limit
        type: integer
      - default: 0
        description: Смещение
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.candidatesResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Кандидаты по вакансии (фильтр/сортировка)
      tags:
      - Анализ
  /vacancies/{id}/skills:
    put:
      consumes:
      - application/json
      parameters:
      - description: ID вакансии (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Список навыков с весами
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/handlers.updateSkillsRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/presenter.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Обновить навыки и веса вакансии
      tags:
      - Вакансии
schemes:
- http
securityDefinitions:
  BearerAuth:
    description: 'Токен авторизации. Поддерживаются форматы: "Bearer <JWT>" или "<JWT>".'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
